<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Block scheme web app" content="">
    <meta name="RF" content="">

    <title>DP</title>

    <script src="js/html2canvas.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!--fabric-->
    <script type="text/javascript" src="vendor/fabricjs/fabric.js"></script>
    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!--Katex-->
    <link rel="stylesheet" href="vendor/katex/katex.min.css">
    <script src="vendor/katex/katex.min.js"></script>
    <!-- Custom styles-->
    <link href="css/style.css" rel="stylesheet">
    <!--<link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">-->
    <!--custom-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/regular.css" integrity="sha384-z3ccjLyn+akM2DtvRQCXJwvT5bGZsspS4uptQKNXNg778nyzvdMqiGcqHVGiAUyY" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/fontawesome.css" integrity="sha384-u5J7JghGz0qUrmEsWzBQkfvc8nK3fUT7DCaQzNQ+q4oEXhGSx+P2OqjWsfIRB8QT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    ￼
    <script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>
    ￼

    <script defer src="https://use.fontawesome.com/releases/v5.5.0/js/regular.js" integrity="sha384-XrvTJeiQ46fxxPrZP6fay5yejA2FV4G1XsS8E4Piz6Fz+7FaEFTw7A7GR972irVV" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.5.0/js/fontawesome.js" integrity="sha384-bNOdVeWbABef8Lh4uZ8c3lJXVlHdf8W5hh1OpJ4dGyqIEhMmcnJrosjQ36Kniaqm" crossorigin="anonymous"></script>
    <script src="./js/common.js"></script>
    <script src="./js/blockDrawData.js"></script>

</head>

<body>

    <!-- output modal-->
    <div class="modal fade" id="outputModal" tabindex="-1" role="dialog" aria-labelledby="outputModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="outputModalLabel">Solution</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- //output modal-->

    <!-- modal block settings-->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Block settings</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!--<form>-->
                    <!--<div class="form-group">-->
                    <!--<label for="block-name" class="col-form-label">Názov bloku:</label>-->
                    <!--<input type="text" class="form-control" id="block-name">-->
                    <!--</div>-->
                    <!--&lt;!&ndash;<div class="form-group">&ndash;&gt;-->
                    <!--&lt;!&ndash;<label for="input-number" class="col-form-label">Počet vstupov:</label>&ndash;&gt;-->
                    <!--&lt;!&ndash;<select class="form-control form-control-sm" id="input-number">&ndash;&gt;-->
                    <!--&lt;!&ndash;</select>&ndash;&gt;-->
                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--</form>-->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="changeBlock()">OK</button>
                </div>
            </div>
        </div>
    </div>
    <!-- //modal block settings-->

    <!-- file picker modal-->
    <div class="modal fade bd-example-modal-sm" id="fileLoadModal" tabindex="-1" role="dialog" aria-labelledby="fileLoadModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="fileLoadModalLabel">Load model</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="modelFile" class="col-form-label">File:</label>
                        <input type="file" id="fileToLoad" class="form-control" id="modelFile">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="loadModel()" class="btn btn-primary">Load model</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- //file picker modal-->

    <!-- help modal-->
    <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="helpModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="helpModalLabel">Help</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h5>Application controls</h5>
                    <span><b>Del</b> - deletes active block</span><br />
                    <span><b>r</b> - rotates active block</span><br />
                    <span><b>Ctrl+j</b> - copies the type of an active block and creates a new instance</span><br />
                    <span><b>Ctrl+s</b> - allows user to save the current scheme</span><br />
                    <span><b>Directional arrows</b> - moves current block to equivalent direction</span><br />
                    <br />
                    <h5>How to use application</h5>
                    <p>Once the empty scheme of user's choice is loaded, it is possible to <b>add blocks</b> by
                        clicking
                        on them once in the bottom left side of main menu. Once added, it is possible to connect these
                        blocks
                        by dragging user's mouse from one object's output to the input of another object.</p>
                    <p>While creating the scheme, it is possible to alter each object's parameters by <b>double
                            clicking on
                            the object</b>. Once the whole scheme is created, connected and altered to the user's
                        liking, it is possible to
                        request the output of the scheme by clicking the <b>Solve/Export</b> button in the top left
                        section of main menu.</p>
                    <p>At any given time, it is possible to <b>save/load</b> a scheme in the scheme settings.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- //help modal-->

    <!--content-->
    <div id="wrapper">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#">DP</a>
                </li>
                <li>
                    <a class="btn drop" data-toggle="collapse" href="#types" role="button" aria-expanded="false"
                        aria-controls="types">
                        <span><i class="fa fa-file" aria-hidden="true"></i> Scheme types</span>
                    </a>
                    <div class="collapse" id="types">
                        <div class="card card-body">
                            <a class="dropdown-item" onclick="changeSchema('rlc')" href="#" data-toggle="tooltip" title="Resistor - Inductance - Capacitor structures"
                                data-placement="top">RLC</a>
                            <a class="dropdown-item" onclick="changeSchema('algebra')" href="#" data-toggle="tooltip" title="Simplification of block diagrams"
                                data-placement="top">Block algebra</a>
                            <a class="dropdown-item" onclick="changeSchema('blockSim')" href="#" data-toggle="tooltip" title="Building of block schemes for simulation"
                                data-placement="top">BlockSim</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a class="btn drop" data-toggle="collapse" href="#setting" role="button" aria-expanded="false"
                        aria-controls="types">
                        <span><i class="fa fa-cog" aria-hidden="true"></i> Scheme setting</span>
                    </a>
                    <div class="collapse" id="setting">
                        <div class="card card-body">
                                <a class="dropdown-item setting-item" href="#" onclick="newScheme()"><i class="fas fa-sync-alt" aria-hidden="true"></i>
                                    New scheme</a>
                                <a class="dropdown-item setting-item" href="#" onclick="saveScheme()"><i class="fas fa-download" aria-hidden="true"></i>
                                    Save scheme</a>
                                <a class="dropdown-item setting-item" href="#" onclick="loadModal()"><i class="fas fa-upload" aria-hidden="true"></i>
                                    Load scheme</a>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="#" onclick="loadHelp()"><i class="fa fa-question-circle" aria-hidden="true"></i> Help</a>
                </li>
                <li>
                    <a id="solve" href="#" onclick="getOutput()"><i class="fa fa-check" aria-hidden="true"></i> Solve</a>
                </li>
                <li>
                    <a id="trash" class="panel2" style="width: 100%" onclick="status_remove()"><i class="far fa-trash-alt" ></i>    Trash</a>
                </li>
                <li>
                    <a id="names" class="panel2" style="width: 100%" onclick="showNamesFunction()"><i class="fas fa-ad" ></i>    Names</a>
                </li>
                <br>

                <hr>
                <li>
                    <span>Blocks</span>
                    <div id="block-container">
                    </div>
                </li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper" oncontextmenu="return false;">
            <div id="menu-toggle">
                <a class="fa fa-bars fa-2x" href="#menu-toggle"></a>
            </div>
            <canvas id="main-canvas"></canvas>
        </div>
        <div id="snackbar">Some text some message..</div>
        <!-- /#page-content-wrapper -->
    </div>
    <!-- /content -->
    <!--custom-->
    <script>
        $("#menu-toggle").click(function (e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
        });

        function loadModal() {
            $('#fileLoadModal').modal();
        }

        //draggable modal
        $(".modal > div").draggable();

        //set original position on modal close
        $('.modal').on('hidden.bs.modal', function (e) {
            $($(this).children()[0]).css("top","0px");
            $($(this).children()[0]).css("left","0px")
        });

        function loadHelp() {
            $('#helpModal').modal();
        }

        //canvas reference
        var canvas = new fabric.Canvas('main-canvas');
        $(document).on("input","#multiply-citatel", function () {
            vypocetMultiply()
        })

        $(document).on("input","#multiply-menovatel", function () {
            vypocetMultiply()
        })
        $(document).on("input","#transfer-numer", function () {
            vypocetTransferFcn()
        })

        $(document).on("input","#transfer-denom", function () {
            vypocetTransferFcn()
        })
        //canvas resizing
        window.onload = function (e) {
            canvasResize();
            loadBlocks();
            $("#wrapper").toggleClass("toggled");
            $(function () {
                $('[data-toggle="tooltip"]').tooltip()
            })
        };

        window.onresize = function (e) {
            canvasResize();
        };

        function canvasResize() {
            canvas.setWidth(window.innerWidth);
            canvas.setHeight(window.innerHeight);
        }
//      /canvas resizing
    </script>
    <script src="js/controller.js"></script>
    <script src="js/blocks.js"></script>
    <script src="js/scheme.js"></script>
    <script src="js/output.js"></script>
</body>

</html>